(function(){var a,b,c,d,e;a=jQuery,a.fn.extend({dropdown:function(c){var f,g;return f={slide:!0,classes:!1,template:e},g=a.extend({},f,c),this.each(function(){var c,e;return e=a(this),c=d(e,g),b(e,c,g),e.trigger("dropdown.refresh")}).next()}}),e=function(a){var b;return b=a?" "+a:"","  <div class='dropdown-container"+b+"'>    <span class='dropdown-header'>    <span class='dropdown-current' />      <a href='javascript:;' class='dropdown-expand'>&darr;</a>    </span>    <div class='dropdown-items'>      <ul />    </div>  </div>"},c=function(b){var c;return b=a(b),c=a("<a />",{href:"javascript:;","data-value":b.val(),text:b.text()}),a("<li />",{"class":"dropdown-entry","data-value":b.val()}).append(c)},d=function(b,c){return a(c.template(c.classes)).insertAfter(b.addClass("dropdown-replaced"))},b=function(b,d,e){return a(document).bind("click",function(){return d.trigger("dropdown.hide")}),d.delegate(".dropdown-entry","click.dropdown",function(){return d.trigger("dropdown.select",a(this).attr("data-value"))}),b.bind("dropdown.refresh",function(){var a;return a=d.find("ul").empty(),b.find("option").each(function(){return a.append(c(this))}),d.trigger("dropdown.select",b.find(":selected").val())}),d.bind("dropdown.select",function(a,c){var e,f;return f=d.find("a[data-value='"+c+"']"),e=d.find(".dropdown-current"),e.text(""),b.val(""),f.size()&&(e.text(f.text()),b.val(c),f.addClass("selected")),d.trigger("dropdown.hide")}),d.bind("dropdown.move",function(){var a,b;return a=d.find(".dropdown-items"),b=function(){return d.toggleClass("expanded")},e.slide?a.slideToggle(b):a.fadeToggle(b)}),d.bind("dropdown.hide",function(){var a,b;return a=d.find(".dropdown-items"),b=function(){return d.removeClass("expanded")},e.slide?a.slideUp(b):a.fadeOut(b)}),d.delegate(".dropdown-current, .dropdown-expand","click",function(a){return a.stopPropagation(),a.preventDefault(),d.trigger("dropdown.move")})}}).call(this)